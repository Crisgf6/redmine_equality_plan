<h2><%= l(:label_gender_statistics) %></h2>

<div class="splitcontent">
  <div class="splitcontentright">
    <%= render 'partials/count_table', { male_users: @male_users,
                                         female_users: @female_users } %>

    <br><br>

    <%= render 'partials/andy_users', { users: @users } %>
  </div>

  <div class="splitcontentleft">
    <%= render 'partials/count_pie_chart', { male_users: @male_users,
                                             female_users: @female_users } %>
  </div>
</div>

<div class="splitcontent">
    <%= render 'partials/count_year_barChart', { male_users_count: @male_users_count,
                                                 female_users_count: @female_users_count,
                                                 months: @months } %>
</div>

<h2><%= l(:label_group_statistics) %></h2>

<div class="splitcontent">
  <div class="splitcontentleft">
    <%= render 'partials/gender_group_users' %>
  </div>

  <div class="splitcontentright">
    <%= render 'partials/count_gender_group_users_barChart', { name: 'feminisedGroupsChart',
                                                               female_pertcentage: @feminised_hash2.values,
                                                               male_pertcentage: @masculinized_hash2.values,
                                                               groups_min: Group.where(id: @masculinized_hash2.keys) } %>

    <%= render 'partials/count_gender_group_users_barChart', { name: 'masculinizedGroupsChart',
                                                               female_pertcentage: @feminised_hash1.values,
                                                               male_pertcentage: @masculinized_hash1.values,
                                                               groups_min: Group.where(id: @feminised_hash1.keys) } %>
  </div>
</div>

<div class="splitcontent">
  <div class="splitcontentleft">
    <h2><%= l(:label_age_and_gender) %></h2>
      <%= render 'partials/age_barChart', { ages: @ages,
                                            female_age_ranges: @female_age_ranges,
                                            male_age_ranges: @male_age_ranges}%>
  </div>
  <div class="splitcontentright">
  </div>
</div>

<div class="splitcontent">
  <%= render 'partials/gender_contract_type_chart' %>
</div>

<div class="splitcontent">
  <div class="splitcontentleft">
    <%= render 'partials/gender_training_chart' %>
  </div>
  <div class="splitcontentright">
    <%= render 'partials/gender_table' %>
  </div>
</div>

<div class="splitcontent">
  <div class="splitcontentleft">
    <h2><%= l(:label_salary) %></h2>
    <div>
      <p>Salario medio de hombres: <%= number_with_precision(@average_male_salary, precision: 2, separator: ',', delimiter: '.') %>€</p><br>
      <p>Salario medio de mujeres: <%= number_with_precision(@average_female_salary, precision: 2, separator: ',', delimiter: '.') %>€</p>
    </div>
    <%= render 'partials/salary_barChart', { name: 'salaryChart',
                                             average_male_salary: @average_male_salary,
                                             average_female_salary: @average_female_salary } %>
  </div>
</div>

<div class="splitcontent">
  <%= render 'partials/leave_of_absence_chart' %>
</div>

<script>
  function manage(user) {
    var id = user.id;
    var gender = $('#gender_'+(id)).val();
    console.log(gender);

    $.ajax({
       url: "/equality_plans_manage",
       data: new URLSearchParams({'id': id, 'gender': gender}).toString()
    })
  };
</script>

<% content_for :header_tags do %>
  <%= javascript_include_tag "Chart.bundle.min" %>
<% end %>
